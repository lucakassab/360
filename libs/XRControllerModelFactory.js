const a0_0x1c4785=a0_0x2200;(function(_0x5c8b7e,_0x5e3e9a){const _0x5d591b=a0_0x2200,_0x5b7cd0=_0x5c8b7e();while(!![]){try{const _0x1c6d5a=-parseInt(_0x5d591b(0x17d))/0x1+-parseInt(_0x5d591b(0x175))/0x2+parseInt(_0x5d591b(0x192))/0x3+parseInt(_0x5d591b(0x194))/0x4*(parseInt(_0x5d591b(0x174))/0x5)+-parseInt(_0x5d591b(0x182))/0x6+parseInt(_0x5d591b(0x160))/0x7+-parseInt(_0x5d591b(0x16d))/0x8*(-parseInt(_0x5d591b(0x18a))/0x9);if(_0x1c6d5a===_0x5e3e9a)break;else _0x5b7cd0['push'](_0x5b7cd0['shift']());}catch(_0xed53e6){_0x5b7cd0['push'](_0x5b7cd0['shift']());}}}(a0_0x5941,0xbf164));import{Mesh,MeshBasicMaterial,Object3D,SphereGeometry}from'three';import{GLTFLoader}from'../loaders/GLTFLoader.js';function a0_0x5941(){const _0x42b50f=['DMLZAwjSzq','DxbKyxrLtwf0CML4v29YBgq','mJKYmJyWnKPMtfPNtW','Du5YrM8','mtuZmNzbAhbzDW','zw52twfW','CMztBMu','wMHNEhK','AxnnzxnO','z2vUzxjPyY10CMLNz2vY','Cgf0Aa','vgv1s3y','vMLZDwfSuMvZCg9UC2vqCM9Wzxj0Eq','C2XLCNbrDwf0zxjUAw9UCW','Bw90Aw9Uq29UDhjVBgXLCG','BwLUtM9Kzq','BwzYru0','x2fZC2v0q2fJAgu','CxvHDgvYBMLVBG','B1nmr2u','ndaXndi5CgH5q1nH','lcbPBIb0B3vJAhbHzcbJB21WB25LBNqG','Bg9Hza','B25mB2fK','zM9YrwfJAa','ywrKrxzLBNrmAxn0zw5LCG','y2XVBMu','DMLZDwfSuMvZCg9UC2vZ','DhjHDMvYC2u','Bwf4tM9Kzq','D2fYBG','z2v0t2jQzwn0qNLoyw1L','Cg9ZAxrPB24','mJe0mZuXmLPswvf1sa','DhjHy2TLzc1WB2LUDgvY','igLUihrOzsbTB2rLBa','vKLtsujjteLuwq','z2X0zKXVywrLCG','Dg91y2HqB2LUDe5Vzgvoyw1L','BMvLzhnvCgrHDgu','mtK5mdvcDeznufO','nJu4ndbLqxjwq0q','DgHLBG','qxnZzxqG','t29tuLK','wLf5v2O','DxbKyxrLrNjVBuDHBwvWywq','zgLZy29UBMvJDgvK','uMLuv1m','nJqYnJa1txjbv2Lc','q29TCg9Uzw50vhLWzq','r0XurKXVywrLCIbUB3qGC2v0lG','C2nLBMu','zgf0yq','ode5ntK2ngzkCeTVyG','q2nAu1a','yxnZzxrvCMW','q291BgqGBM90igzPBMqGDg91y2GGzg90lca','BgvYCfzLy3rVCNm','Bwf0zxjPywW','q291BgqGBM90igzPBMqG','DMfSDwvoB2rL','ounpDKvZsG','DMfSDwvZ','C2v0ugf0Aa','ywrK','y29UBMvJDgvK','y29TCg9Uzw50CW'];a0_0x5941=function(){return _0x42b50f;};return a0_0x5941();}import{Constants as a0_0x3fedd8,fetchProfile,MotionController}from'../libs/motion-controllers.module.js';const DEFAULT_PROFILES_PATH='https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles',DEFAULT_PROFILE=a0_0x1c4785(0x155);class XRControllerModel extends Object3D{constructor(){const _0x3eb4cf=a0_0x1c4785;super(),this['motionController']=null,this[_0x3eb4cf(0x195)]=null;}['setEnvironmentMap'](_0x493451){const _0x298561=a0_0x1c4785,_0x3afefe={'jmKUy':function(_0x39a8a8,_0x34908d){return _0x39a8a8==_0x34908d;}};if(_0x3afefe['jmKUy'](this[_0x298561(0x195)],_0x493451))return this;return this[_0x298561(0x195)]=_0x493451,this[_0x298561(0x168)](_0x46a25b=>{const _0x3a55a6=_0x298561;_0x46a25b['isMesh']&&(_0x46a25b[_0x3a55a6(0x187)][_0x3a55a6(0x195)]=this[_0x3a55a6(0x195)],_0x46a25b[_0x3a55a6(0x187)][_0x3a55a6(0x173)]=!![]);}),this;}['updateMatrixWorld'](_0x35fd18){const _0x3554ab=a0_0x1c4785,_0x14502d={'ZQyWj':function(_0x3c8e4a,_0x21a331){return _0x3c8e4a===_0x21a331;}};super[_0x3554ab(0x191)](_0x35fd18);if(!this[_0x3554ab(0x15a)])return;this[_0x3554ab(0x15a)][_0x3554ab(0x17a)](),Object[_0x3554ab(0x18b)](this[_0x3554ab(0x15a)][_0x3554ab(0x18f)])[_0x3554ab(0x164)](_0x21184f=>{const _0x5c2862=_0x3554ab,_0x510dda={'Zhgxy':function(_0x1a0144,_0x748c81){const _0xa39ae2=a0_0x2200;return _0x14502d[_0xa39ae2(0x179)](_0x1a0144,_0x748c81);}};Object[_0x5c2862(0x18b)](_0x21184f[_0x5c2862(0x167)])[_0x5c2862(0x164)](_0x13ddab=>{const _0x5dd37e=_0x5c2862,{valueNode:_0x9b50e6,minNode:_0x14873a,maxNode:_0x845c96,value:_0x57ec27,valueNodeProperty:_0x3124be}=_0x13ddab;if(!_0x9b50e6)return;if(_0x3124be===a0_0x3fedd8[_0x5dd37e(0x158)][_0x5dd37e(0x170)])_0x9b50e6[_0x5dd37e(0x190)]=_0x57ec27;else _0x510dda[_0x5dd37e(0x197)](_0x3124be,a0_0x3fedd8[_0x5dd37e(0x158)]['TRANSFORM'])&&(_0x9b50e6['quaternion'][_0x5dd37e(0x159)](_0x14873a[_0x5dd37e(0x15e)],_0x845c96['quaternion'],_0x57ec27),_0x9b50e6['position'][_0x5dd37e(0x186)](_0x14873a[_0x5dd37e(0x16c)],_0x845c96[_0x5dd37e(0x16c)],_0x57ec27));});});}}function findNodes(_0x4190a7,_0x1a1631){const _0x2e83b0=a0_0x1c4785,_0x330474={'rfSne':function(_0x27d420,_0x56ba88){return _0x27d420===_0x56ba88;}};Object[_0x2e83b0(0x18b)](_0x4190a7['components'])[_0x2e83b0(0x164)](_0x4f82fe=>{const _0x17ee36=_0x2e83b0,{type:_0x48e5ea,touchPointNodeName:_0x5c6589,visualResponses:_0x2f99af}=_0x4f82fe;if(_0x330474[_0x17ee36(0x196)](_0x48e5ea,a0_0x3fedd8[_0x17ee36(0x17e)]['TOUCHPAD'])){_0x4f82fe['touchPointNode']=_0x1a1631['getObjectByName'](_0x5c6589);if(_0x4f82fe['touchPointNode']){const _0x2bded3=new SphereGeometry(0.001),_0x45ee3f=new MeshBasicMaterial({'color':0xff}),_0x382a41=new Mesh(_0x2bded3,_0x45ee3f);_0x4f82fe['touchPointNode']['add'](_0x382a41);}else console[_0x17ee36(0x16a)](_0x17ee36(0x185)+_0x4f82fe[_0x17ee36(0x172)]+_0x17ee36(0x161)+_0x4f82fe['id']);}Object[_0x17ee36(0x18b)](_0x2f99af)[_0x17ee36(0x164)](_0x216df8=>{const _0x2b76dd=_0x17ee36,{valueNodeName:_0xd9179,minNodeName:_0x20d647,maxNodeName:_0x4f347d,valueNodeProperty:_0x48b597}=_0x216df8;if(_0x48b597===a0_0x3fedd8[_0x2b76dd(0x158)]['TRANSFORM']){_0x216df8[_0x2b76dd(0x15b)]=_0x1a1631[_0x2b76dd(0x16b)](_0x20d647),_0x216df8[_0x2b76dd(0x169)]=_0x1a1631[_0x2b76dd(0x16b)](_0x4f347d);if(!_0x216df8[_0x2b76dd(0x15b)]){console[_0x2b76dd(0x16a)](_0x2b76dd(0x188)+_0x20d647+'\x20in\x20the\x20model');return;}if(!_0x216df8[_0x2b76dd(0x169)]){console[_0x2b76dd(0x16a)]('Could\x20not\x20find\x20'+_0x4f347d+_0x2b76dd(0x16f));return;}}_0x216df8[_0x2b76dd(0x189)]=_0x1a1631[_0x2b76dd(0x16b)](_0xd9179),!_0x216df8[_0x2b76dd(0x189)]&&console[_0x2b76dd(0x16a)](_0x2b76dd(0x188)+_0xd9179+_0x2b76dd(0x16f));});});}function addAssetSceneToControllerModel(_0x2f010a,_0x14208b){const _0x125aa9=a0_0x1c4785,_0x2fa30e={'uNrFo':function(_0x1bf3dc,_0x28d67b,_0x516dad){return _0x1bf3dc(_0x28d67b,_0x516dad);}};_0x2fa30e[_0x125aa9(0x193)](findNodes,_0x2f010a[_0x125aa9(0x15a)],_0x14208b),_0x2f010a['envMap']&&_0x14208b[_0x125aa9(0x168)](_0x530372=>{const _0x36a1d1=_0x125aa9;_0x530372[_0x36a1d1(0x198)]&&(_0x530372[_0x36a1d1(0x187)][_0x36a1d1(0x195)]=_0x2f010a[_0x36a1d1(0x195)],_0x530372[_0x36a1d1(0x187)][_0x36a1d1(0x173)]=!![]);}),_0x2f010a[_0x125aa9(0x18d)](_0x14208b);}class XRControllerModelFactory{constructor(_0xd5963b=null,_0x56c419=null){const _0x257737=a0_0x1c4785;this[_0x257737(0x171)]=_0xd5963b,this[_0x257737(0x156)]=DEFAULT_PROFILES_PATH,this['_assetCache']={},this[_0x257737(0x163)]=_0x56c419,!this[_0x257737(0x171)]&&(this[_0x257737(0x171)]=new GLTFLoader());}[a0_0x1c4785(0x18c)](_0x5eae61){return this['path']=_0x5eae61,this;}['createControllerModel'](_0x3ad100){const _0x2f8a36=a0_0x1c4785,_0x1a40dd={'RiTWS':function(_0x1021ff,_0x23fe4c,_0xa67a71){return _0x1021ff(_0x23fe4c,_0xa67a71);},'Dvxqv':function(_0x34ea44,_0x17c3ce){return _0x34ea44!==_0x17c3ce;},'Ywcbq':_0x2f8a36(0x16e),'oSLGe':function(_0x2ce43f,_0x47dc21,_0x4b25ef,_0x5ec933){return _0x2ce43f(_0x47dc21,_0x4b25ef,_0x5ec933);},'yJhAj':_0x2f8a36(0x18e),'KyBYY':_0x2f8a36(0x17b)},_0xa2fad0=new XRControllerModel();let _0x4cf8f1=null;return _0x3ad100[_0x2f8a36(0x165)](_0x1a40dd['yJhAj'],_0x2a1176=>{const _0x3a4f2d=_0x2f8a36,_0x35d232={'CcZSP':function(_0x46735c,_0x21362d,_0x1c5aeb){const _0x19f17e=a0_0x2200;return _0x1a40dd[_0x19f17e(0x17c)](_0x46735c,_0x21362d,_0x1c5aeb);},'OoSRY':function(_0x29a0f2,_0x128ead,_0x1421c3){return _0x1a40dd['RiTWS'](_0x29a0f2,_0x128ead,_0x1421c3);},'TeuKv':_0x3a4f2d(0x17f)},_0x312113=_0x2a1176[_0x3a4f2d(0x181)];if(_0x1a40dd['Dvxqv'](_0x312113['targetRayMode'],_0x1a40dd['Ywcbq'])||!_0x312113['gamepad']||_0x312113['hand'])return;_0x1a40dd[_0x3a4f2d(0x15f)](fetchProfile,_0x312113,this['path'],DEFAULT_PROFILE)[_0x3a4f2d(0x176)](({profile:_0x231f9f,assetPath:_0x5356eb})=>{const _0x162642=_0x3a4f2d,_0x279a79={'mfrEM':function(_0x4ae359,_0x8f6699,_0x13f4e3){const _0x1f37a7=a0_0x2200;return _0x35d232[_0x1f37a7(0x183)](_0x4ae359,_0x8f6699,_0x13f4e3);}};_0xa2fad0[_0x162642(0x15a)]=new MotionController(_0x312113,_0x231f9f,_0x5356eb);const _0x17951f=this['_assetCache'][_0xa2fad0['motionController'][_0x162642(0x184)]];if(_0x17951f){_0x4cf8f1=_0x17951f[_0x162642(0x180)][_0x162642(0x166)](),_0x35d232[_0x162642(0x178)](addAssetSceneToControllerModel,_0xa2fad0,_0x4cf8f1);if(this[_0x162642(0x163)])this[_0x162642(0x163)](_0x4cf8f1);}else{if(!this['gltfLoader'])throw new Error(_0x35d232[_0x162642(0x157)]);this[_0x162642(0x171)][_0x162642(0x18c)](''),this[_0x162642(0x171)][_0x162642(0x162)](_0xa2fad0[_0x162642(0x15a)]['assetUrl'],_0x56bd00=>{const _0x401b11=_0x162642;this[_0x401b11(0x15d)][_0xa2fad0['motionController'][_0x401b11(0x184)]]=_0x56bd00,_0x4cf8f1=_0x56bd00['scene']['clone'](),_0x279a79[_0x401b11(0x15c)](addAssetSceneToControllerModel,_0xa2fad0,_0x4cf8f1);if(this[_0x401b11(0x163)])this[_0x401b11(0x163)](_0x4cf8f1);},null,()=>{const _0x393f23=_0x162642;throw new Error(_0x393f23(0x177)+_0xa2fad0[_0x393f23(0x15a)][_0x393f23(0x184)]+'\x20missing\x20or\x20malformed.');});}})['catch'](_0x22b5b8=>{const _0x1928f9=_0x3a4f2d;console[_0x1928f9(0x16a)](_0x22b5b8);});}),_0x3ad100[_0x2f8a36(0x165)](_0x1a40dd['KyBYY'],()=>{const _0x4f350b=_0x2f8a36;_0xa2fad0[_0x4f350b(0x15a)]=null,_0xa2fad0['remove'](_0x4cf8f1),_0x4cf8f1=null;}),_0xa2fad0;}}function a0_0x2200(_0x2addf9,_0x39c2bc){const _0x59416f=a0_0x5941();return a0_0x2200=function(_0x2200b2,_0x9d321f){_0x2200b2=_0x2200b2-0x155;let _0x25d825=_0x59416f[_0x2200b2];if(a0_0x2200['rRFlRe']===undefined){var _0xa151bd=function(_0x12b747){const _0xccee04='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x40d25a='',_0x262073='';for(let _0x3457b3=0x0,_0x54df2c,_0x92f801,_0x60183a=0x0;_0x92f801=_0x12b747['charAt'](_0x60183a++);~_0x92f801&&(_0x54df2c=_0x3457b3%0x4?_0x54df2c*0x40+_0x92f801:_0x92f801,_0x3457b3++%0x4)?_0x40d25a+=String['fromCharCode'](0xff&_0x54df2c>>(-0x2*_0x3457b3&0x6)):0x0){_0x92f801=_0xccee04['indexOf'](_0x92f801);}for(let _0x5ebb36=0x0,_0x48599e=_0x40d25a['length'];_0x5ebb36<_0x48599e;_0x5ebb36++){_0x262073+='%'+('00'+_0x40d25a['charCodeAt'](_0x5ebb36)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x262073);};a0_0x2200['xfRDVk']=_0xa151bd,_0x2addf9=arguments,a0_0x2200['rRFlRe']=!![];}const _0x26c7d1=_0x59416f[0x0],_0x3582b4=_0x2200b2+_0x26c7d1,_0x1aa407=_0x2addf9[_0x3582b4];return!_0x1aa407?(_0x25d825=a0_0x2200['xfRDVk'](_0x25d825),_0x2addf9[_0x3582b4]=_0x25d825):_0x25d825=_0x1aa407,_0x25d825;},a0_0x2200(_0x2addf9,_0x39c2bc);}export{XRControllerModelFactory};